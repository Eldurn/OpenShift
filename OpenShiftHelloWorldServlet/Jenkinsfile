node('maven') {
    stage('Build') {
         echo 'Building....'
         openshiftScale depCfg: 'jws-app', replicaCount: '0', verbose: 'false', verifyReplicaCount: 'false'
         openshiftBuild bldCfg: 'jws-app', checkForTriggeredDeployments: 'false', showBuildLogs: 'false', verbose: 'false'
    }
    stage('Test') {
        echo 'Testing....'
        sh "cd /var/lib/jenkins/"
        sh "mvn test"
    }
    stage('Deploy') {
   	    echo 'Deploying....'
		openshiftDeploy depCfg: 'jws-app', verbose: 'false', waitTime: ''
		openshiftScale depCfg: 'jws-app', replicaCount: '1', verbose: 'false', verifyReplicaCount: 'true'
    } 
}